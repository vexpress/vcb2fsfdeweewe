{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { ApiUrl } from 'src/app/core/apiUrl';\nlet ChangePasswordComponent = class ChangePasswordComponent {\n  constructor(formBuilder, router, message, http) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.message = message;\n    this.http = http;\n    this.isSubmitted = false;\n    this.isLoading = false;\n    this.isAdmin = false;\n    this.createResetForm();\n  }\n  ngOnInit() {\n    if (this.router.url.includes('/admin')) {\n      this.isAdmin = true;\n    }\n  }\n  /*** Intialize Form ***/\n  createResetForm() {\n    const pattern1 = new RegExp(/^(?=.*\\d)(?=.*[A-Z]).{8,15}$/);\n    this.changePasswordForm = this.formBuilder.group({\n      oldPassword: ['', Validators.required],\n      password: ['', [Validators.required, Validators.minLength(8), Validators.maxLength(15), Validators.pattern(pattern1)]],\n      confirmPassword: ['', Validators.required]\n    }, {\n      validator: this.checkPasswords\n    });\n  }\n  /*** Validation for password and Confirm password ***/\n  checkPasswords(group) {\n    const pass = group.controls.password.value;\n    const confirmPass = group.controls.confirmPassword.value;\n    if (pass && confirmPass) {\n      return pass === confirmPass ? null : {\n        notSame: true\n      };\n    }\n    return null;\n  }\n  /*** Submit Form ***/\n  onSubmit() {\n    this.isSubmitted = true;\n    if (!this.changePasswordForm.valid) {\n      setTimeout(() => {\n        this.isSubmitted = false;\n      }, 20000);\n      return;\n    }\n    const params = Object.assign({}, this.changePasswordForm.value);\n    delete params.confirmPassword;\n    this.isLoading = true;\n    const url = this.isAdmin ? ApiUrl.admin.changePassword : ApiUrl.auth.changePassword;\n    this.http.postData(url, params).subscribe(response => {\n      this.isLoading = false;\n      if (!!response) {\n        this.message.toast('success', response.message);\n        if (this.isAdmin) {\n          this.router.navigate(['admin/all-dealers']);\n        } else {\n          this.router.navigate(['']);\n        }\n      }\n    }, err => {\n      this.isLoading = false;\n    });\n  }\n};\nChangePasswordComponent = __decorate([Component({\n  selector: 'app-change-password',\n  templateUrl: './change-password.component.html',\n  styleUrls: ['./change-password.component.scss']\n})], ChangePasswordComponent);\nexport { ChangePasswordComponent };","map":null,"metadata":{},"sourceType":"module"}